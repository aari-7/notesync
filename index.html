<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoteSync - IGCSE Study Hub</title>
    <meta name="description" content="Share and discover notes for all 11 IGCSE subjects with NoteSync.">
    <meta name="theme-color" content="#8b5cf6">
    <link rel="manifest" href="/manifest.json">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Ionicons for Icons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <!-- Floating Action Button -->
    <button id="uploadFAB" class="fab" title="Upload Note">
        <ion-icon name="add-outline"></ion-icon>
    </button>

    <!-- Supabase SDK (Production Ready) -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
        // Supabase Configuration - Live Production Keys
        const SUPABASE_URL = 'https://btxdiuolhqeunojwiapi.supabase.co';
        const SUPABASE_ANON_KEY = 'sb_publishable_BeCPBFrXk4XdneEVdKY6Nw_6nm-e8Fu';
        const ADMIN_PASSWORD = 'GOAT_SYNC_2026';
    </script>

    <link rel="stylesheet" href="style.css">
    <style>
        /* Fallback if external CSS fails to load immediately */
        body {
            margin: 0;
            background: #0f0c29;
            color: white;
            font-family: 'Outfit', sans-serif;
        }
    </style>
</head>

<body>

    <div class="background-globule globule-1"></div>
    <div class="background-globule globule-2"></div>
    <div class="background-globule globule-3"></div>

    <div class="app-container">
        <!-- Navigation -->
        <nav class="glass-nav">
            <div class="logo">
                <ion-icon name="flask-outline" class="logo-icon"></ion-icon>
                <span>NoteSync</span>
            </div>
            <div class="nav-actions" style="gap: 2rem;">
                <button id="googleLoginBtn" class="secondary-btn">
                    <ion-icon name="logo-google"></ion-icon> Login
                </button>
                <div id="userProfile" style="display: none; align-items: center; gap: 15px;">
                    <img id="userAvatar" src="" alt="User"
                        style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid #8b5cf6;">
                    <button id="logoutBtn" class="text-btn">Logout</button>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <header class="hero">
            <h1>Master Your <span class="highlight igcses">Subjects</span></h1>
            <p>Share and discover top-tier notes for <span class="highlight all">12 Subjects</span> including Sciences,
                Humanities, and Math.</p>

            <!-- Search Bar -->
            <div class="search-container glass-panel">
                <ion-icon name="search-outline"></ion-icon>
                <input type="text" id="searchInput" placeholder="Search by title, subject, or author...">
            </div>

            <div class="filter-controls glass-panel">
                <div class="filter-row">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="physics">Physics</button>
                    <button class="filter-btn" data-filter="chemistry">Chemistry</button>
                    <button class="filter-btn" data-filter="biology">Biology</button>
                    <button class="filter-btn" data-filter="mathematics">Math</button>

                    <div class="divider"></div>

                    <div class="select-wrapper compact">
                        <select id="subjectFilter" class="filter-select">
                            <option value="" disabled selected>More </option>
                            <option value="english_lang">English Language</option>
                            <option value="english_lit">English Literature</option>
                            <option value="geography">Geography</option>
                            <option value="history">History</option>
                            <option value="economics">Economics</option>
                            <option value="comp_sci">Computer Science</option>
                            <option value="business">Business Studies</option>
                            <option value="gp">Global Perspectives (GP)</option>
                        </select>
                    </div>
                </div>
            </div>
        </header>

        <!-- Mobile Floating Action Button -->
        <button id="fabUpload" class="fab-btn">
            <ion-icon name="add-outline"></ion-icon>
        </button>

        <!-- Notes Grid -->
        <main class="notes-grid" id="notesGrid">
            <!-- Notes will be injected here via JS -->
            <!-- Placeholder for empty state -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <ion-icon name="file-tray-outline"></ion-icon>
                <p>No notes uploaded yet. Be the first!</p>
            </div>
        </main>
    </div>

    <!-- Upload Modal -->
    <div id="uploadModal" class="modal">
        <div class="modal-content glass-panel">
            <span class="close-modal">&times;</span>
            <h2>Upload Notes</h2>
            <form id="uploadForm">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" id="title" placeholder="e.g. Unit 1: Atomic Structure" required>
                </div>

                <div class="form-group">
                    <label for="subject">Subject</label>
                    <select id="subject" required>
                        <option value="" disabled selected>Select Subject</option>
                        <option value="mathematics">Mathematics</option>
                        <option value="biology">Biology</option>
                        <option value="chemistry">Chemistry</option>
                        <option value="physics">Physics</option>
                        <option value="english_lang">English Language</option>
                        <option value="english_lit">English Literature</option>
                        <option value="geography">Geography</option>
                        <option value="history">History</option>
                        <option value="economics">Economics</option>
                        <option value="comp_sci">Computer Science</option>
                        <option value="business">Business Studies</option>
                        <option value="gp">Global Perspectives (GP)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" placeholder="What parts of the syllabus does this cover? (min 10 chars)"
                        required></textarea>
                </div>

                <div class="form-group">
                    <label for="author">Author (Optional)</label>
                    <input type="text" id="author" placeholder="Your Name">
                </div>

                <div class="form-group">
                    <label for="fileInput">File (PDF or Image)</label>
                    <div class="file-drop-area" id="dropArea">
                        <ion-icon name="document-attach-outline"></ion-icon>
                        <p>Drag & Drop or Click to Upload</p>
                        <input type="file" id="fileInput" accept=".pdf, .png, .jpg, .jpeg" hidden>
                        <span id="fileName" class="file-name"></span>
                    </div>
                </div>

                <button type="submit" id="submitBtn" class="submit-btn">Upload Note</button>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>